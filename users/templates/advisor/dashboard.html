{% extends 'advisor/advisor_base.html' %}

{% block content %}
<h2 style="margin-bottom: 30px; color: #ffd700;">Active Conversations</h2>

<div class="chat-users-list">
    {% if chat_users %}
    <div class="user-grid"
        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
        {% for user in chat_users %}
        <div class="user-card"
            style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 10px; border: 1px solid rgba(255, 215, 0, 0.2);">
            <h3 style="color: #fff;">{{ user.first_name }} {{ user.last_name }}</h3>
            <p style="color: #ccc;">{{ user.email }}</p>
            {% if user.last_seen %}
            <p style="font-size: 0.8em; color: #888;">Last seen: {{ user.last_seen|timesince }} ago</p>
            {% endif %}
            <a href="{% url 'advisor_chat' user.id %}" class="btn"
                style="display: block; text-align: center; background: #ffd700; color: #000; padding: 10px; margin-top: 15px; border-radius: 5px; text-decoration: none; font-weight: bold;">
                <i class="fas fa-comments"></i> Chat Now
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 50px; color: #666;">
        <i class="fas fa-inbox" style="font-size: 3em; margin-bottom: 20px;"></i>
        <p>No active chats found.</p>
    </div>
    {% endif %}
</div>
{% endblock %}